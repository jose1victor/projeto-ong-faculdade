function inicializarModoEscuro(){let e=document.querySelector(".botao-modo-escuro"),t=document.body,r="true"===localStorage.getItem("modoEscuro");r&&(t.classList.add("dark-mode"),e.innerHTML="☀️"),e.addEventListener("click",()=>{t.classList.toggle("dark-mode"),t.classList.contains("dark-mode")?(localStorage.setItem("modoEscuro","true"),e.innerHTML="☀️"):(localStorage.setItem("modoEscuro","false"),e.innerHTML="\uD83C\uDF19")})}function inicializarApp(){console.log("App inicializado. Entrega III."),inicializarMenuHamburguer(),inicializarSPA(),inicializarModoEscuro()}function inicializarMenuHamburguer(){let e=document.querySelector(".menu-hamburguer"),t=document.querySelector(".menu-principal");if(!e||!t)return;let r=t.querySelectorAll("a[href]"),o=r[0],a=r[r.length-1];function i(r){let a="boolean"==typeof r?r:!t.classList.contains("menu-aberto");e.classList.toggle("menu-aberto",a),t.classList.toggle("menu-aberto",a),e.setAttribute("aria-expanded",a),a?(document.addEventListener("keydown",n),o?.focus()):(document.removeEventListener("keydown",n),e.focus())}function n(r){t.classList.contains("menu-aberto")&&("Escape"===r.key&&i(!1),"Tab"===r.key&&(r.shiftKey?(document.activeElement===o||document.activeElement===e)&&(r.preventDefault(),a?.focus()):document.activeElement===a?(r.preventDefault(),e.focus()):document.activeElement===e&&(r.preventDefault(),o?.focus())))}e.addEventListener("click",()=>{i()})}async function carregarConteudo(e){let t=document.getElementById("app-content");if(t)try{let r=await fetch(e);if(!r.ok)throw Error("N\xe3o foi poss\xedvel carregar a p\xe1gina.");let o=await r.text(),a=new DOMParser,i=a.parseFromString(o,"text/html"),n=i.querySelector("main").innerHTML;t.innerHTML=n,t.innerHTML=n,"cadastro.html"===e&&(console.log("Detectei cadastro.html. Agendando inicializa\xe7\xe3o da valida\xe7\xe3o..."),setTimeout(()=>{inicializarValidacaoFormulario()},0))}catch(l){console.error("Erro ao carregar conte\xfado:",l),t.innerHTML="<h2>Erro ao carregar esta se\xe7\xe3o.</h2>"}}function inicializarSPA(){("/"===window.location.pathname||window.location.pathname.endsWith("index.html"))&&carregarConteudo("home.html"),document.addEventListener("click",e=>{let t=e.target.closest("a");if(!t||"_blank"===t.target||!t.href.startsWith(window.location.origin)||t.href.includes("#"))return;e.preventDefault();let r=new URL(t.href).pathname.substring(1);("index.html"===r||""===r)&&(r="home.html"),window.history.pushState({},"","home.html"===r?"/":r),carregarConteudo(r)}),window.addEventListener("popstate",()=>{let e=window.location.pathname.substring(1)||"home.html";carregarConteudo(e)})}function inicializarValidacaoFormulario(){console.log("Fun\xe7\xe3o inicializarValidacaoFormulario() FOI CHAMADA.");let e=document.querySelector("form");if(!e){console.error("ERRO: N\xe3o encontrei o elemento <form>!");return}console.log("Encontrei o formul\xe1rio. Adicionando o 'submit' listener..."),e.setAttribute("novalidate",!0),e.addEventListener("submit",t=>{console.log("Listener de SUBMIT foi ACIONADO!"),t.preventDefault();let r=document.querySelector(".alert");r&&r.remove();let o=e.checkValidity();if(o)console.log("Formul\xe1rio v\xe1lido. Enviando (simulado)."),mostrarAlerta("<strong>Sucesso!</strong> Seu cadastro foi enviado e ser\xe1 analisado.","alert-sucesso",e),e.reset(),e.querySelectorAll("input").forEach(e=>{e.classList.remove("touched")});else{console.log("Formul\xe1rio inv\xe1lido."),mostrarAlerta("<strong>Erro!</strong> Por favor, verifique os campos destacados em vermelho.","alert-erro",e);let a=e.querySelector("input:invalid");a&&a.focus(),e.querySelectorAll("input").forEach(e=>{e.classList.add("touched")})}}),e.querySelectorAll("input").forEach(e=>{e.addEventListener("blur",()=>{e.classList.add("touched")})})}function mostrarAlerta(e,t,r){if(!r)return;let o=document.createElement("div");o.className=`alert ${t}`,o.innerHTML=e,r.parentNode.insertBefore(o,r),o.scrollIntoView({behavior:"smooth",block:"start"})}function validarEmail(e){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(String(e).toLowerCase())}function validarCPF(e){return/^\d{3}\.\d{3}\.\d{3}-\d{2}$/.test(e)}document.addEventListener("DOMContentLoaded",inicializarApp);